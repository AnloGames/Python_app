<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
  <ol id="task_list">
  </ol>
  <h1 id="header">Task 1</h1>
  <p id="description">
    description
  </p>
  <textarea id="code">print("Hello world!")</textarea>
  <br>
    <button id="execute" onclick="run_code()">
      Execute code
    </button>
  <br>
  <textarea id="result" readonly></textarea>
  <script>
    let tasks

    async function load_task(task_num) {
        header = document.getElementById('header')
        header.textContent = tasks[task_num]['name']
        desc = document.getElementById('description')
        desc.textContent = tasks[task_num]['description']
    }

    async function load_tasks() {
      let token = localStorage.getItem('token')
      let resp = await fetch("/api/tasks", {
        method: 'GET',
        headers: {
          'Authorization': token
        }
      })
      tasks = await resp.json()

      let task_list = document.getElementById('task_list')

      for(let i = 0; i < tasks.length; i++) {
        let element = document.createElement('li')
        element.textContent = tasks[i]['name']
        element.onclick = () => load_task(i)
        task_list.appendChild(element)
      }

    }
    load_tasks()
  </script>
</body>
</html>